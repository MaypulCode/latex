# ================================================================
# 帯域切替設定
# ================================================================
# 機能ON/OFFはomnetpp.iniで設定
# このファイルはパラメータのみ（閾値・TTT・予測等）
# ================================================================

# ================================================================
# タイミングパラメータ
# ================================================================
**.bandSwitchStartDelay = 0.1s
**.bandSwitchEvaluationInterval = 0.01s
**.bandSwitchMinInterval = 0.01s

# ================================================================
# SINR閾値 (3GPP準拠)
# ================================================================
# mmWave → Sub-6GHz
**.thresholdMmWaveMin = 6.481669450167865dB                 # default 10.0dB

# Sub-6GHz → mmWave
**.thresholdMmWaveGood = 34.34874256089117dB                 # default 33.0dB
**.thresholdSub6Good   = 34.34874256089117dB                 # default 33.0dB

# ヒステリシス（ping-pong防止）
**.thresholdSub6Margin = 2.0dB
**.thresholdMmWaveMargin = 2.0dB

# ================================================================
# TTT (Time To Trigger)
# ================================================================
*.sender.bandSwitch.timeToTrigger = 0.32s
*.receiver.bandSwitch.timeToTrigger = 0.32s

# ================================================================
# EWMA Layer 3 Filtering
# ================================================================
# EWMA有効/無効（Bandモードでは無効）
*.sender.useEwmaFiltering = true
*.receiver.useEwmaFiltering = true
*.sender.bandSwitch.ewmaAlpha = 0.8
*.receiver.bandSwitch.ewmaAlpha = 0.8

# Adaptive EWMA Parameters
*.sender.adaptiveEwmaMinAlpha = 0.2
*.receiver.adaptiveEwmaMinAlpha = 0.2
*.sender.adaptiveEwmaMaxAlpha = 0.9
*.receiver.adaptiveEwmaMaxAlpha = 0.9
*.sender.adaptiveEwmaSensitivity = 0.5dB
*.receiver.adaptiveEwmaSensitivity = 0.5dB

# ================================================================
# A3イベント設定 (3GPP TS 38.331)
# ================================================================
*.sender.bandSwitch.a3Offset = 3.0dB
*.receiver.bandSwitch.a3Offset = 3.0dB
*.sender.bandSwitch.hysteresis = 2.0dB
*.receiver.bandSwitch.hysteresis = 2.0dB

# ================================================================
# Base設定（extends用）
# ================================================================
[Config BandSwitching_Simple_Base]
**.bandSwitchEnabled = true
**.useMeasurementBasedBandSwitching = false
**.dynamicThresholdEnabled = false

[Config BandSwitching_Adaptive_Base]
**.bandSwitchEnabled = true
**.useMeasurementBasedBandSwitching = true
**.dynamicThresholdEnabled = true

# ================================================================
# 予測ベース切替パラメータ（Holt Linear Trend）
# ================================================================
*.sender.holtAlpha   = 0.10799058163162976             # default 0.3
*.receiver.holtAlpha = 0.10799058163162976             # default 0.3
*.sender.holtBeta = 0.12040113183460797                 # default 0.1
*.receiver.holtBeta = 0.12040113183460797               # default 0.1

# 予測ウィンドウ
*.sender.predictionHorizon = 0.5s
*.receiver.predictionHorizon = 0.5s
*.sender.predictionConfidenceThreshold = 0.7
*.receiver.predictionConfidenceThreshold = 0.7
*.sender.holtPredictionSteps = 10
*.receiver.holtPredictionSteps = 10

# 予備閾値
*.sender.earlyWarningMargin = 10.0dB
*.receiver.earlyWarningMargin = 10.0dB

# ================================================================
# デュアルバンド測定
# ================================================================
**.enableDualBandMeasurement = false
**.dualBandMeasurementInterval = 0.1s
